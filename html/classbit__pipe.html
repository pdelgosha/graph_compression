<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Marked Graph Compression: bit_pipe Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Marked Graph Compression
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classbit__pipe-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">bit_pipe Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A sequence of arbitrary number of bits.  
 <a href="classbit__pipe.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bitstream_8h_source.html">bitstream.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6dab67e6a47c1d1f020fe769df27cef1" id="r_a6dab67e6a47c1d1f020fe769df27cef1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a6dab67e6a47c1d1f020fe769df27cef1">bit_pipe</a> ()</td></tr>
<tr class="separator:a6dab67e6a47c1d1f020fe769df27cef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381c4371859988c65802767d31fc7458" id="r_a381c4371859988c65802767d31fc7458"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a381c4371859988c65802767d31fc7458">bit_pipe</a> (const unsigned int &amp;n)</td></tr>
<tr class="memdesc:a381c4371859988c65802767d31fc7458"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor given an integer  <br /></td></tr>
<tr class="separator:a381c4371859988c65802767d31fc7458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc311ad05b01a2ec6e979882aa8b703e" id="r_adc311ad05b01a2ec6e979882aa8b703e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#adc311ad05b01a2ec6e979882aa8b703e">bit_pipe</a> (const mpz_class &amp;n)</td></tr>
<tr class="memdesc:adc311ad05b01a2ec6e979882aa8b703e"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor given an mpz_class object  <br /></td></tr>
<tr class="separator:adc311ad05b01a2ec6e979882aa8b703e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341a1f62d728a67f730503ca722a7770" id="r_a341a1f62d728a67f730503ca722a7770"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a341a1f62d728a67f730503ca722a7770">shift_right</a> (int n)</td></tr>
<tr class="memdesc:a341a1f62d728a67f730503ca722a7770"><td class="mdescLeft">&#160;</td><td class="mdescRight">shifts n bits to the right.  <br /></td></tr>
<tr class="separator:a341a1f62d728a67f730503ca722a7770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148fab2b6b3ee730fbaa52539d5a4d74" id="r_a148fab2b6b3ee730fbaa52539d5a4d74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a148fab2b6b3ee730fbaa52539d5a4d74">shift_left</a> (int n)</td></tr>
<tr class="memdesc:a148fab2b6b3ee730fbaa52539d5a4d74"><td class="mdescLeft">&#160;</td><td class="mdescRight">shift everything n bits to the left  <br /></td></tr>
<tr class="separator:a148fab2b6b3ee730fbaa52539d5a4d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bdc57f1f598bfad0eaa40860f17000c" id="r_a4bdc57f1f598bfad0eaa40860f17000c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a> () const</td></tr>
<tr class="memdesc:a4bdc57f1f598bfad0eaa40860f17000c"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the number of chunks  <br /></td></tr>
<tr class="separator:a4bdc57f1f598bfad0eaa40860f17000c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a283f47fa4422ac50b9b28e8f276f7252" id="r_a283f47fa4422ac50b9b28e8f276f7252"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a283f47fa4422ac50b9b28e8f276f7252">residue</a> () const</td></tr>
<tr class="memdesc:a283f47fa4422ac50b9b28e8f276f7252"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of residual bits in the last chunk  <br /></td></tr>
<tr class="separator:a283f47fa4422ac50b9b28e8f276f7252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b00c544ebb21a894961d658006b0b0e" id="r_a1b00c544ebb21a894961d658006b0b0e"><td class="memItemLeft" align="right" valign="top">const vector&lt; unsigned int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a> () const</td></tr>
<tr class="memdesc:a1b00c544ebb21a894961d658006b0b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns const reference to the bit sequence (object bits)  <br /></td></tr>
<tr class="separator:a1b00c544ebb21a894961d658006b0b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b14715c897cba1713a0ea19ea2996d8" id="r_a0b14715c897cba1713a0ea19ea2996d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a0b14715c897cba1713a0ea19ea2996d8">append_left</a> (const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;B)</td></tr>
<tr class="memdesc:a0b14715c897cba1713a0ea19ea2996d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">append B to the left of me  <br /></td></tr>
<tr class="separator:a0b14715c897cba1713a0ea19ea2996d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea1ac9d3b026ebf3f71a68fccd1d639" id="r_a4ea1ac9d3b026ebf3f71a68fccd1d639"><td class="memItemLeft" align="right" valign="top">unsigned int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a4ea1ac9d3b026ebf3f71a68fccd1d639">operator[]</a> (int n)</td></tr>
<tr class="memdesc:a4ea1ac9d3b026ebf3f71a68fccd1d639"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a reference to the nth chunk  <br /></td></tr>
<tr class="separator:a4ea1ac9d3b026ebf3f71a68fccd1d639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c67130ac4b0fd511998f991c8ad58d" id="r_a58c67130ac4b0fd511998f991c8ad58d"><td class="memItemLeft" align="right" valign="top">const unsigned int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a58c67130ac4b0fd511998f991c8ad58d">operator[]</a> (int n) const</td></tr>
<tr class="memdesc:a58c67130ac4b0fd511998f991c8ad58d"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a (const) reference to the nth chunk (const)  <br /></td></tr>
<tr class="separator:a58c67130ac4b0fd511998f991c8ad58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a86f38af1e9736b053728033490476b50" id="r_a86f38af1e9736b053728033490476b50"><td class="memItemLeft" align="right" valign="top">vector&lt; unsigned int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a></td></tr>
<tr class="memdesc:a86f38af1e9736b053728033490476b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">a vector of chunks, each of size 4 bytes. This represents an arbitrary sequence of bits  <br /></td></tr>
<tr class="separator:a86f38af1e9736b053728033490476b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3e84b02751803adaab499b5dad86fe" id="r_a0f3e84b02751803adaab499b5dad86fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a></td></tr>
<tr class="memdesc:a0f3e84b02751803adaab499b5dad86fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">the number of bits in the last chunk (the last chunk starts from MSB, so the BIT_INT - last_bits many bits to the right (LSB) are empty and should be zero)  <br /></td></tr>
<tr class="separator:a0f3e84b02751803adaab499b5dad86fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a8f65a774c3f7ab2392033a7cf4a170ad" id="r_a8f65a774c3f7ab2392033a7cf4a170ad"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a8f65a774c3f7ab2392033a7cf4a170ad">obitstream</a></td></tr>
<tr class="separator:a8f65a774c3f7ab2392033a7cf4a170ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad424cca57ffb12b4cd748da4dcfe7b41" id="r_ad424cca57ffb12b4cd748da4dcfe7b41"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#ad424cca57ffb12b4cd748da4dcfe7b41">ibitstream</a></td></tr>
<tr class="separator:ad424cca57ffb12b4cd748da4dcfe7b41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9baed08cd68f51c68cb4dba4f52cc55e" id="r_a9baed08cd68f51c68cb4dba4f52cc55e"><td class="memItemLeft" align="right" valign="top">ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a9baed08cd68f51c68cb4dba4f52cc55e">operator&lt;&lt;</a> (ostream &amp;o, const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;B)</td></tr>
<tr class="memdesc:a9baed08cd68f51c68cb4dba4f52cc55e"><td class="mdescLeft">&#160;</td><td class="mdescRight">write to the output  <br /></td></tr>
<tr class="separator:a9baed08cd68f51c68cb4dba4f52cc55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307267b689df83029a19dedf67cc4729" id="r_a307267b689df83029a19dedf67cc4729"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbit__pipe.html">bit_pipe</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a307267b689df83029a19dedf67cc4729">operator&lt;&lt;</a> (const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;B, int n)</td></tr>
<tr class="memdesc:a307267b689df83029a19dedf67cc4729"><td class="mdescLeft">&#160;</td><td class="mdescRight">shifts bits in B n bits to the left  <br /></td></tr>
<tr class="separator:a307267b689df83029a19dedf67cc4729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de74a16947432771bc4001f8fd7079d" id="r_a7de74a16947432771bc4001f8fd7079d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbit__pipe.html">bit_pipe</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbit__pipe.html#a7de74a16947432771bc4001f8fd7079d">operator&gt;&gt;</a> (const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;B, int n)</td></tr>
<tr class="memdesc:a7de74a16947432771bc4001f8fd7079d"><td class="mdescLeft">&#160;</td><td class="mdescRight">shifts bits in B n bits to the right  <br /></td></tr>
<tr class="separator:a7de74a16947432771bc4001f8fd7079d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A sequence of arbitrary number of bits. </p>
<p>The <a class="el" href="classbit__pipe.html" title="A sequence of arbitrary number of bits.">bit_pipe</a> class implements an arbitrary sequence of bits. This is useful for example when we want to use Elias delta code to write some integer to the output. This can lead to storage efficiencies, since in such cases we will need to work with incomplete bytes.</p>
<p>The bits vector stores an array of chunks, each having 4 bytes (32 bits). For instance the sequence of bits &lt;11001100110011&gt; is stored as a single chunk &lt;11001100110011|000000000000000000&gt; of size 32 where the | sign shows that the remaining zeros are residuals (not part of data). This is stored as the last_bits variable. In this example, last_bits is 14 because there are 14 bits of data in the last chunk. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6dab67e6a47c1d1f020fe769df27cef1" name="a6dab67e6a47c1d1f020fe769df27cef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dab67e6a47c1d1f020fe769df27cef1">&#9670;&#160;</a></span>bit_pipe() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bit_pipe::bit_pipe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   28</span>{<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.resize(0); <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> = 0;}</div>
<div class="ttc" id="aclassbit__pipe_html_a0f3e84b02751803adaab499b5dad86fe"><div class="ttname"><a href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">bit_pipe::last_bits</a></div><div class="ttdeci">int last_bits</div><div class="ttdoc">the number of bits in the last chunk (the last chunk starts from MSB, so the BIT_INT - last_bits many...</div><div class="ttdef"><b>Definition</b> bitstream.h:26</div></div>
<div class="ttc" id="aclassbit__pipe_html_a86f38af1e9736b053728033490476b50"><div class="ttname"><a href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bit_pipe::bits</a></div><div class="ttdeci">vector&lt; unsigned int &gt; bits</div><div class="ttdoc">a vector of chunks, each of size 4 bytes. This represents an arbitrary sequence of bits</div><div class="ttdef"><b>Definition</b> bitstream.h:25</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a381c4371859988c65802767d31fc7458" name="a381c4371859988c65802767d31fc7458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a381c4371859988c65802767d31fc7458">&#9670;&#160;</a></span>bit_pipe() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit_pipe::bit_pipe </td>
          <td>(</td>
          <td class="paramtype">const unsigned int &amp;&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>constructor given an integer </p>
<p>Some examples: n = 1, bits = 1|0000000 (followed by 3 zero bytes) n = 12, bits = 1100|0000 (followed by 3 zero bytes) n = 255633, bits = 11111001 10100100 01|000000 (followed by a zero byte) </p>
<div class="fragment"><div class="line"><span class="lineno">   10</span>                                       {</div>
<div class="line"><span class="lineno">   11</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.resize(1);</div>
<div class="line"><span class="lineno">   12</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[0] = n;</div>
<div class="line"><span class="lineno">   13</span>  <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> = <a class="code hl_function" href="bitstream_8h.html#a9dfce6f51e3febb3973aa3b16c2fecb4">nu_bits</a>(n);</div>
<div class="line"><span class="lineno">   14</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[0] &lt;&lt;= <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a> - <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a>; <span class="comment">// so that n appears in the MSB place </span></div>
<div class="line"><span class="lineno">   15</span>}</div>
<div class="ttc" id="abitstream_8h_html_a9dfce6f51e3febb3973aa3b16c2fecb4"><div class="ttname"><a href="bitstream_8h.html#a9dfce6f51e3febb3973aa3b16c2fecb4">nu_bits</a></div><div class="ttdeci">unsigned int nu_bits(unsigned int n)</div><div class="ttdoc">returns number of bits in a positive integer n, e.g. 3 has 3 bits, 12 has 4 bits, and 0 has 0 bits.</div><div class="ttdef"><b>Definition</b> bitstream.cpp:635</div></div>
<div class="ttc" id="abitstream_8h_html_afcadf5aa65c5159bfb96c4d82ebc0a5d"><div class="ttname"><a href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a></div><div class="ttdeci">const unsigned int BIT_INT</div><div class="ttdef"><b>Definition</b> bitstream.h:13</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc311ad05b01a2ec6e979882aa8b703e" name="adc311ad05b01a2ec6e979882aa8b703e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc311ad05b01a2ec6e979882aa8b703e">&#9670;&#160;</a></span>bit_pipe() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit_pipe::bit_pipe </td>
          <td>(</td>
          <td class="paramtype">const mpz_class &amp;&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>constructor given an mpz_class object </p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>                                    {</div>
<div class="line"><span class="lineno">   18</span>  <span class="keywordtype">size_t</span> n_bits = mpz_sizeinbase(n.get_mpz_t(), 2);</div>
<div class="line"><span class="lineno">   19</span>  <span class="keywordtype">size_t</span> <a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a> = n_bits / <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a> + 1; <span class="comment">// how many unsigned int chunks we need</span></div>
<div class="line"><span class="lineno">   20</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.resize(<a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a>);</div>
<div class="line"><span class="lineno">   21</span>  mpz_export(&amp;<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[0],</div>
<div class="line"><span class="lineno">   22</span>             &amp;<a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a>,</div>
<div class="line"><span class="lineno">   23</span>             1, <span class="comment">// order can be 1 for most significant word first or -1 for least significant first</span></div>
<div class="line"><span class="lineno">   24</span>             <a class="code hl_variable" href="bitstream_8h.html#adcaf4dd854153bb193477f88f921eb36">BYTE_INT</a>, <span class="comment">// size: each word will be size bytes and</span></div>
<div class="line"><span class="lineno">   25</span>             0, <span class="comment">// Within each word endian can be 1 for most significant byte first, -1 for least significant first, or 0 for the native endianness of the host CPU.</span></div>
<div class="line"><span class="lineno">   26</span>             0, <span class="comment">// The most significant nails bits of each word are unused and set to zero, this can be 0 to produce full words.</span></div>
<div class="line"><span class="lineno">   27</span>             n.get_mpz_t());</div>
<div class="line"><span class="lineno">   28</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.resize(<a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a>);</div>
<div class="line"><span class="lineno">   29</span>  <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> = <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>; <span class="comment">// at the moment LSB of n is the LSB bit of the rightmost chunk</span></div>
<div class="line"><span class="lineno">   30</span>  <span class="comment">// but we need the MSB of n to be the MSB of the leftmost chunk</span></div>
<div class="line"><span class="lineno">   31</span>  <span class="comment">// in order to do this, we must shift left</span></div>
<div class="line"><span class="lineno">   32</span>  <span class="comment">// but how much? it is related to the remainder of bit count in n with respect to BIT_INT</span></div>
<div class="line"><span class="lineno">   33</span>  <span class="keywordtype">int</span> rem = n_bits % <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>; <span class="comment">// the remainder </span></div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">if</span> (rem != 0){</div>
<div class="line"><span class="lineno">   35</span>    <span class="comment">// if remainder is zero, nothing should be done</span></div>
<div class="line"><span class="lineno">   36</span>    <span class="comment">// otherwise, shift left BIT_INT - rem bits</span></div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_function" href="classbit__pipe.html#a148fab2b6b3ee730fbaa52539d5a4d74">shift_left</a>(<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a> - rem);</div>
<div class="line"><span class="lineno">   38</span>  }</div>
<div class="line"><span class="lineno">   39</span>  </div>
<div class="line"><span class="lineno">   40</span>}</div>
<div class="ttc" id="abitstream_8h_html_adcaf4dd854153bb193477f88f921eb36"><div class="ttname"><a href="bitstream_8h.html#adcaf4dd854153bb193477f88f921eb36">BYTE_INT</a></div><div class="ttdeci">const unsigned int BYTE_INT</div><div class="ttdef"><b>Definition</b> bitstream.h:12</div></div>
<div class="ttc" id="aclassbit__pipe_html_a148fab2b6b3ee730fbaa52539d5a4d74"><div class="ttname"><a href="classbit__pipe.html#a148fab2b6b3ee730fbaa52539d5a4d74">bit_pipe::shift_left</a></div><div class="ttdeci">void shift_left(int n)</div><div class="ttdoc">shift everything n bits to the left</div><div class="ttdef"><b>Definition</b> bitstream.cpp:76</div></div>
<div class="ttc" id="aclassbit__pipe_html_a4bdc57f1f598bfad0eaa40860f17000c"><div class="ttname"><a href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">bit_pipe::size</a></div><div class="ttdeci">int size() const</div><div class="ttdoc">return the number of chunks</div><div class="ttdef"><b>Definition</b> bitstream.h:46</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0b14715c897cba1713a0ea19ea2996d8" name="a0b14715c897cba1713a0ea19ea2996d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b14715c897cba1713a0ea19ea2996d8">&#9670;&#160;</a></span>append_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bit_pipe::append_left </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>append B to the left of me </p>
<p>Example: if this is &lt;1100|0000&gt; and B is &lt;11110000 1111|0000&gt; then this becomes &lt;11110000 11111100&gt; (trailing zero bytes not shown in example) </p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>                                           {</div>
<div class="line"><span class="lineno">  147</span>  <span class="keywordflow">if</span> (B.<a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a>() == 0) <span class="comment">// nothing should be done, B is empty</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordtype">int</span> B_res = B.<a class="code hl_function" href="classbit__pipe.html#a283f47fa4422ac50b9b28e8f276f7252">residue</a>(); <span class="comment">// number of incomplete bits in B</span></div>
<div class="line"><span class="lineno">  150</span>  <span class="keywordflow">if</span> (B_res == <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>){</div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">// B has complete chunks, so I just need to insert chunks of B at the beginning of my chunks</span></div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.insert(<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.begin(), B.<a class="code hl_function" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a>().begin(), B.<a class="code hl_function" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a>().end());</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">return</span>; <span class="comment">// all set!</span></div>
<div class="line"><span class="lineno">  154</span>  }</div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">// B has a residue</span></div>
<div class="line"><span class="lineno">  156</span>  <span class="comment">// so I need to shift myself to the right and then append</span></div>
<div class="line"><span class="lineno">  157</span>  <a class="code hl_function" href="classbit__pipe.html#a341a1f62d728a67f730503ca722a7770">shift_right</a>(B_res);</div>
<div class="line"><span class="lineno">  158</span>  <span class="comment">// then, my leftmost chunk must be combined with the rightmost chunk of B:</span></div>
<div class="line"><span class="lineno">  159</span>  <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[0] |= B[B.<a class="code hl_function" href="classbit__pipe.html#a4bdc57f1f598bfad0eaa40860f17000c">size</a>()-1];</div>
<div class="line"><span class="lineno">  160</span>  <span class="comment">// then insert all but the rightmost chunk of B at my left</span></div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">if</span> (B.<a class="code hl_function" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a>().size()&gt;1)</div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.insert(<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.begin(), B.<a class="code hl_function" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a>().begin(), B.<a class="code hl_function" href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">chunks</a>().end()-1);</div>
<div class="line"><span class="lineno">  163</span>}</div>
<div class="ttc" id="aclassbit__pipe_html_a1b00c544ebb21a894961d658006b0b0e"><div class="ttname"><a href="classbit__pipe.html#a1b00c544ebb21a894961d658006b0b0e">bit_pipe::chunks</a></div><div class="ttdeci">const vector&lt; unsigned int &gt; &amp; chunks() const</div><div class="ttdoc">returns const reference to the bit sequence (object bits)</div><div class="ttdef"><b>Definition</b> bitstream.h:52</div></div>
<div class="ttc" id="aclassbit__pipe_html_a283f47fa4422ac50b9b28e8f276f7252"><div class="ttname"><a href="classbit__pipe.html#a283f47fa4422ac50b9b28e8f276f7252">bit_pipe::residue</a></div><div class="ttdeci">int residue() const</div><div class="ttdoc">returns the number of residual bits in the last chunk</div><div class="ttdef"><b>Definition</b> bitstream.h:49</div></div>
<div class="ttc" id="aclassbit__pipe_html_a341a1f62d728a67f730503ca722a7770"><div class="ttname"><a href="classbit__pipe.html#a341a1f62d728a67f730503ca722a7770">bit_pipe::shift_right</a></div><div class="ttdeci">void shift_right(int n)</div><div class="ttdoc">shifts n bits to the right.</div><div class="ttdef"><b>Definition</b> bitstream.cpp:45</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b00c544ebb21a894961d658006b0b0e" name="a1b00c544ebb21a894961d658006b0b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b00c544ebb21a894961d658006b0b0e">&#9670;&#160;</a></span>chunks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const vector&lt; unsigned int &gt; &amp; bit_pipe::chunks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns const reference to the bit sequence (object bits) </p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ea1ac9d3b026ebf3f71a68fccd1d639" name="a4ea1ac9d3b026ebf3f71a68fccd1d639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea1ac9d3b026ebf3f71a68fccd1d639">&#9670;&#160;</a></span>operator[]() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int &amp; bit_pipe::operator[] </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns a reference to the nth chunk </p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>                                        {</div>
<div class="line"><span class="lineno">  180</span>  <span class="keywordflow">if</span> (n &lt; 0 or n &gt;= <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()){</div>
<div class="line"><span class="lineno">  181</span>    cerr &lt;&lt; <span class="stringliteral">&quot; ERROR: bit_pipe::operator [] called for value out of range &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; the range is [0, &quot;</span> &lt;&lt; <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()-1 &lt;&lt; <span class="stringliteral">&quot;]&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  182</span>  }</div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[n];</div>
<div class="line"><span class="lineno">  184</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a58c67130ac4b0fd511998f991c8ad58d" name="a58c67130ac4b0fd511998f991c8ad58d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c67130ac4b0fd511998f991c8ad58d">&#9670;&#160;</a></span>operator[]() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int &amp; bit_pipe::operator[] </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns a (const) reference to the nth chunk (const) </p>
<div class="fragment"><div class="line"><span class="lineno">  187</span>                                                   {</div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordflow">if</span> (n &lt; 0 or n &gt;= <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()){</div>
<div class="line"><span class="lineno">  189</span>    cerr &lt;&lt; <span class="stringliteral">&quot; ERROR: bit_pipe::operator [] called for value out of range &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; the range is [0, &quot;</span> &lt;&lt; <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()-1 &lt;&lt; <span class="stringliteral">&quot;]&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  190</span>  }</div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[n];</div>
<div class="line"><span class="lineno">  192</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a283f47fa4422ac50b9b28e8f276f7252" name="a283f47fa4422ac50b9b28e8f276f7252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a283f47fa4422ac50b9b28e8f276f7252">&#9670;&#160;</a></span>residue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int bit_pipe::residue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns the number of residual bits in the last chunk </p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a>;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a148fab2b6b3ee730fbaa52539d5a4d74" name="a148fab2b6b3ee730fbaa52539d5a4d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a148fab2b6b3ee730fbaa52539d5a4d74">&#9670;&#160;</a></span>shift_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bit_pipe::shift_left </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shift everything n bits to the left </p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>                              {</div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordflow">if</span> (n &lt; 0){</div>
<div class="line"><span class="lineno">   78</span>    cerr &lt;&lt; <span class="stringliteral">&quot; ERROR: bit_pipe::shift_left called for negative value &quot;</span> &lt;&lt; n &lt;&lt; endl;</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   80</span>  }</div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">if</span> (n &gt;= <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>){</div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">// we need to remove a number of bytes</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordtype">int</span> bytes_to_remove = n / <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>; <span class="comment">// these many bytes must be remove</span></div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.erase(<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.begin(), <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.begin() + bytes_to_remove);</div>
<div class="line"><span class="lineno">   85</span>    n = n % <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>;</div>
<div class="line"><span class="lineno">   86</span>  }</div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span> (n == 0)</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// when we reach at this line, we have 1 &lt;= n &lt;= 7</span></div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = <a class="code hl_function" href="bitstream_8h.html#a6364b017a9400a38f7a994376bb3ebee">mask_gen</a>(n) &lt;&lt; (<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-n); <span class="comment">// n bits in MSB for carryover masking</span></div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> carry; <span class="comment">// carryover to the left byte</span></div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size(); i++){</div>
<div class="line"><span class="lineno">   94</span>    carry = (mask &amp; <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i]) &gt;&gt; (<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-n); <span class="comment">// bring it to the right</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> ( i&gt; 0)</div>
<div class="line"><span class="lineno">   96</span>      <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i-1] |= carry; <span class="comment">// add carry to the left guy</span></div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i] &lt;&lt;= n; </div>
<div class="line"><span class="lineno">   98</span>  }</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>  <span class="comment">// now, deal with last_bits</span></div>
<div class="line"><span class="lineno">  101</span>  <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> -= n;</div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> &lt;= 0){</div>
<div class="line"><span class="lineno">  103</span>    <span class="comment">// means that the rightmost byte must vanish</span></div>
<div class="line"><span class="lineno">  104</span>    <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> += <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>;</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.pop_back(); <span class="comment">// remove the last byte</span></div>
<div class="line"><span class="lineno">  106</span>  }</div>
<div class="line"><span class="lineno">  107</span>}</div>
<div class="ttc" id="abitstream_8h_html_a6364b017a9400a38f7a994376bb3ebee"><div class="ttname"><a href="bitstream_8h.html#a6364b017a9400a38f7a994376bb3ebee">mask_gen</a></div><div class="ttdeci">unsigned int mask_gen(int n)</div><div class="ttdoc">generates a binary mask with n consecutive ones in LSB</div><div class="ttdef"><b>Definition</b> bitstream.cpp:649</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a341a1f62d728a67f730503ca722a7770" name="a341a1f62d728a67f730503ca722a7770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341a1f62d728a67f730503ca722a7770">&#9670;&#160;</a></span>shift_right()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bit_pipe::shift_right </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shifts n bits to the right. </p>
<p>Example: if bits is 11111111 11111000 and n = 5, then bits becomes 00000111 11111111 11000000 (trailing zero bytes are not shown in this example) </p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>                               {</div>
<div class="line"><span class="lineno">   46</span>  <span class="keywordflow">if</span> (n == 0)</div>
<div class="line"><span class="lineno">   47</span>    <span class="keywordflow">return</span>; <span class="comment">// nothing to do</span></div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">if</span> (n &gt;= <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>){</div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.insert(<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.begin(), n / <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>, 0); <span class="comment">// n/BIT_INT bytes each zero will be added</span></div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_function" href="classbit__pipe.html#a341a1f62d728a67f730503ca722a7770">shift_right</a>(n%<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>);</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   52</span>  }</div>
<div class="line"><span class="lineno">   53</span>  <span class="comment">// when we arrive at this line, n must be strictly less than BIT_INT and strictly bigger than zero, i.e. 0 &lt; n &lt; BIT_INT</span></div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = <a class="code hl_function" href="bitstream_8h.html#a6364b017a9400a38f7a994376bb3ebee">mask_gen</a>(n); <span class="comment">// mask is going to be n many ones (in LSB), e.g. if n = 3, mask is 00000111, this is useful in carrying over LSB of left bytes to the right bytes</span></div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> carry_current = 0; <span class="comment">// carry over of left bytes to the right. For instance, if we want to shift 11111111 3 bits to the right, it becomes 00011111 but a carry over 111 must be added to the byte to the right. This is initially zero</span></div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> carry_prev = 0; <span class="comment">// the same concept, but for the previous byte (to the left of me). </span></div>
<div class="line"><span class="lineno">   57</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size();i++){</div>
<div class="line"><span class="lineno">   58</span>    carry_current = <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i] &amp; mask; <span class="comment">// find carryover bits for current byte</span></div>
<div class="line"><span class="lineno">   59</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i] &gt;&gt;= n; <span class="comment">// shift the current byte</span></div>
<div class="line"><span class="lineno">   60</span>    carry_prev &lt;&lt;= (<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-n); <span class="comment">// put the previous carryover bits in place to be added to the current byte</span></div>
<div class="line"><span class="lineno">   61</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i] |= carry_prev; <span class="comment">// add the carryover to the current byte</span></div>
<div class="line"><span class="lineno">   62</span>    carry_prev = carry_current; <span class="comment">// the current byte is the previous byte for the next byte</span></div>
<div class="line"><span class="lineno">   63</span>  }</div>
<div class="line"><span class="lineno">   64</span>    </div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordflow">if</span> (n &gt; (<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a> - <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a>)){</div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">// the LSB bits of the last chunk must fall into a new chunk, so I should push_back a new chunk, which is zero for now</span></div>
<div class="line"><span class="lineno">   67</span>    carry_prev &lt;&lt;= (<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-n);</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.push_back(carry_prev); <span class="comment">// the last byte is the last carryover shifted to the left </span></div>
<div class="line"><span class="lineno">   69</span>  }</div>
<div class="line"><span class="lineno">   70</span>  <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> += n;</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> &gt; <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>)</div>
<div class="line"><span class="lineno">   72</span>    <a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a> -= <a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>;</div>
<div class="line"><span class="lineno">   73</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bdc57f1f598bfad0eaa40860f17000c" name="a4bdc57f1f598bfad0eaa40860f17000c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bdc57f1f598bfad0eaa40860f17000c">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int bit_pipe::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return the number of chunks </p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size();}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Symbol Documentation</h2>
<a id="ad424cca57ffb12b4cd748da4dcfe7b41" name="ad424cca57ffb12b4cd748da4dcfe7b41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad424cca57ffb12b4cd748da4dcfe7b41">&#9670;&#160;</a></span>ibitstream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classibitstream.html">ibitstream</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f65a774c3f7ab2392033a7cf4a170ad" name="a8f65a774c3f7ab2392033a7cf4a170ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f65a774c3f7ab2392033a7cf4a170ad">&#9670;&#160;</a></span>obitstream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classobitstream.html">obitstream</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a307267b689df83029a19dedf67cc4729" name="a307267b689df83029a19dedf67cc4729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a307267b689df83029a19dedf67cc4729">&#9670;&#160;</a></span>operator&lt;&lt; <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbit__pipe.html">bit_pipe</a> operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>shifts bits in B n bits to the left </p>
<div class="fragment"><div class="line"><span class="lineno">  166</span>                                               {</div>
<div class="line"><span class="lineno">  167</span>  <a class="code hl_class" href="classbit__pipe.html">bit_pipe</a> ans = B;</div>
<div class="line"><span class="lineno">  168</span>  ans.<a class="code hl_function" href="classbit__pipe.html#a148fab2b6b3ee730fbaa52539d5a4d74">shift_left</a>(n);</div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordflow">return</span> ans;</div>
<div class="line"><span class="lineno">  170</span>}</div>
<div class="ttc" id="aclassbit__pipe_html"><div class="ttname"><a href="classbit__pipe.html">bit_pipe</a></div><div class="ttdoc">A sequence of arbitrary number of bits.</div><div class="ttdef"><b>Definition</b> bitstream.h:23</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9baed08cd68f51c68cb4dba4f52cc55e" name="a9baed08cd68f51c68cb4dba4f52cc55e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9baed08cd68f51c68cb4dba4f52cc55e">&#9670;&#160;</a></span>operator&lt;&lt; <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ostream &amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>write to the output </p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                                    {</div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordflow">if</span> (B.<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()==0){</div>
<div class="line"><span class="lineno">  114</span>    o &lt;&lt; <span class="stringliteral">&quot;&lt;&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">return</span> o;</div>
<div class="line"><span class="lineno">  116</span>  }</div>
<div class="line"><span class="lineno">  117</span>  o &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><span class="lineno">  118</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;(B.<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()-1); i++){ <span class="comment">// the last byte requires special handling</span></div>
<div class="line"><span class="lineno">  119</span>    bitset&lt;BIT_INT&gt; b(B.<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[i]);</div>
<div class="line"><span class="lineno">  120</span>    o &lt;&lt; b &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  121</span>  }</div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_byte = B.<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>[B.<a class="code hl_variable" href="classbit__pipe.html#a86f38af1e9736b053728033490476b50">bits</a>.size()-1];</div>
<div class="line"><span class="lineno">  123</span>    </div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>;k&gt;(<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-B.<a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a>);k--){ <span class="comment">// starting from MSB bit to LSB for existing bits</span></div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">if</span> (last_byte &amp; (1&lt;&lt;(k-1)))</div>
<div class="line"><span class="lineno">  126</span>      o &lt;&lt; <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  128</span>      o &lt;&lt; <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno">  129</span>  }</div>
<div class="line"><span class="lineno">  130</span>  o &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>; <span class="comment">// to show the place of the last bit</span></div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=<a class="code hl_variable" href="bitstream_8h.html#afcadf5aa65c5159bfb96c4d82ebc0a5d">BIT_INT</a>-B.<a class="code hl_variable" href="classbit__pipe.html#a0f3e84b02751803adaab499b5dad86fe">last_bits</a>; k&gt;=1; k--){</div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordflow">if</span> (last_byte &amp;(1&lt;&lt;(k-1)))</div>
<div class="line"><span class="lineno">  133</span>      o &lt;&lt; <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  135</span>      o &lt;&lt; <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno">  136</span>  }</div>
<div class="line"><span class="lineno">  137</span>  o &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">  138</span>  <span class="keywordflow">return</span> o;</div>
<div class="line"><span class="lineno">  139</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7de74a16947432771bc4001f8fd7079d" name="a7de74a16947432771bc4001f8fd7079d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7de74a16947432771bc4001f8fd7079d">&#9670;&#160;</a></span>operator&gt;&gt;</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbit__pipe.html">bit_pipe</a> operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbit__pipe.html">bit_pipe</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>shifts bits in B n bits to the right </p>
<div class="fragment"><div class="line"><span class="lineno">  172</span>                                               {</div>
<div class="line"><span class="lineno">  173</span>  <a class="code hl_class" href="classbit__pipe.html">bit_pipe</a> ans = B;</div>
<div class="line"><span class="lineno">  174</span>  ans.<a class="code hl_function" href="classbit__pipe.html#a341a1f62d728a67f730503ca722a7770">shift_right</a>(n);</div>
<div class="line"><span class="lineno">  175</span>  <span class="keywordflow">return</span> ans;</div>
<div class="line"><span class="lineno">  176</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a86f38af1e9736b053728033490476b50" name="a86f38af1e9736b053728033490476b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f38af1e9736b053728033490476b50">&#9670;&#160;</a></span>bits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;unsigned int&gt; bit_pipe::bits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>a vector of chunks, each of size 4 bytes. This represents an arbitrary sequence of bits </p>

</div>
</div>
<a id="a0f3e84b02751803adaab499b5dad86fe" name="a0f3e84b02751803adaab499b5dad86fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f3e84b02751803adaab499b5dad86fe">&#9670;&#160;</a></span>last_bits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int bit_pipe::last_bits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the number of bits in the last chunk (the last chunk starts from MSB, so the BIT_INT - last_bits many bits to the right (LSB) are empty and should be zero) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="bitstream_8h_source.html">bitstream.h</a></li>
<li><a class="el" href="bitstream_8cpp.html">bitstream.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
