\hypertarget{gcomp_8cpp}{}\section{gcomp.\+cpp File Reference}
\label{gcomp_8cpp}\index{gcomp.\+cpp@{gcomp.\+cpp}}


To compress / decompress simple marked graphs.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}marked\+\_\+graph\+\_\+compression.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
To compress / decompress simple marked graphs. 

This code has two functionalities\+: 1) gets a simple marked graph and compresses it, 2) gets a simple marked graph in its compressed form and decompresses it.

In order to compress a graph, the hyperparameters h and delta should be given using -\/h and -\/d, respectively. The input graph should be given using -\/i option, followed by the name of the file containing the graph. Also, the compressed graph will be stored in the file specified by -\/o option. A graph must be specified using its edge list in the following format\+: first, the number of vertices comes, then the mark of vertices in order, then each line contains the information on an edge, which is of the form i j x y, meaning there is an edge between vertices i and j, with mark x and y towards i and j, respectively.

In order to decompress, the compressed file should be given after -\/i, the file to store the decompressed graph should be given using -\/o, and an argument -\/u for uncompress should be given. 

\subsection{Function Documentation}
\mbox{\Hypertarget{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{gcomp.\+cpp@{gcomp.\+cpp}!main@{main}}
\index{main@{main}!gcomp.\+cpp@{gcomp.\+cpp}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}


\begin{DoxyCode}
22                                 \{
23   \textcolor{keywordtype}{int} h, delta;
24   \textcolor{keywordtype}{string} infile, outfile;
25   \textcolor{keywordtype}{bool} uncompress = \textcolor{keyword}{false}; \textcolor{comment}{// becomes true if -u option is given (to decompress)}
26   \textcolor{keywordtype}{bool} quiet = \textcolor{keyword}{true}; \textcolor{comment}{// becomes false if -v option is given (verbose)}
27   \textcolor{keywordtype}{bool} stat = \textcolor{keyword}{false}; \textcolor{comment}{// if true, statistics on the properties of the compressed graph, e.g. number of star
       vertices / edges or the number of partition graphs will be given}
28   \textcolor{keywordtype}{char} opt;
29 
30   \textcolor{keywordtype}{string} report\_file, stat\_file;
31   ofstream report\_stream, stat\_stream; 
32 
33   \textcolor{keywordflow}{while} ((opt = getopt(argc, argv, \textcolor{stringliteral}{"h:d:i:o:uvsV:S:"})) != EOF)\{
34     \textcolor{keywordflow}{switch}(opt)\{
35     \textcolor{keywordflow}{case} \textcolor{charliteral}{'h'}:
36       h = atoi(optarg);
37       \textcolor{keywordflow}{break};
38     \textcolor{keywordflow}{case} \textcolor{charliteral}{'d'}:
39       delta = atoi(optarg);
40       \textcolor{keywordflow}{break};
41     \textcolor{keywordflow}{case} \textcolor{charliteral}{'i'}:
42       infile = string(optarg);
43       \textcolor{keywordflow}{break};
44     \textcolor{keywordflow}{case} \textcolor{charliteral}{'o'}:
45       outfile = string(optarg);
46       \textcolor{keywordflow}{break};
47     \textcolor{keywordflow}{case} \textcolor{charliteral}{'u'}:
48       uncompress = \textcolor{keyword}{true}; \textcolor{comment}{// in the decompression phase }
49       \textcolor{keywordflow}{break};
50     \textcolor{keywordflow}{case} \textcolor{charliteral}{'v'}:
51       quiet = \textcolor{keyword}{false};
52       \textcolor{keywordflow}{break};
53     \textcolor{keywordflow}{case} \textcolor{charliteral}{'V'}:
54       report\_file = string(optarg);
55       \textcolor{keywordflow}{if} (report\_file != \textcolor{stringliteral}{""})\{
56         report\_stream.open(report\_file);
57         \hyperlink{classlogger_a8e3da449edb99f9ecc59858c0e75beca}{logger::report\_stream} = &report\_stream;
58       \}
59       \textcolor{keywordflow}{break};
60     \textcolor{keywordflow}{case} \textcolor{charliteral}{'s'}:
61       stat = \textcolor{keyword}{true};
62       \textcolor{keywordflow}{break};
63     \textcolor{keywordflow}{case} \textcolor{charliteral}{'S'}:
64       stat\_file = string(optarg);
65       \textcolor{keywordflow}{if} (stat\_file != \textcolor{stringliteral}{""})\{
66         stat\_stream.open(stat\_file);
67         \hyperlink{classlogger_a7db37821f875f2ba3540980b355779f5}{logger::stat\_stream} = &stat\_stream;
68       \}
69       \textcolor{keywordflow}{break};
70     \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:
71       cerr << \textcolor{stringliteral}{"Error: option -"} << char(optopt) << \textcolor{stringliteral}{" requires an argument"} << endl;
72       \textcolor{keywordflow}{return} 1;
73     \}
74   \}
75   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false} and h <= 0)\{
76     cerr << \textcolor{stringliteral}{"Error: parameter h must be a positive integer. Instead, the value "} << h << \textcolor{stringliteral}{" was given."} << 
      endl;
77     \textcolor{keywordflow}{return} 1;
78   \}
79   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false} and delta <= 0)\{
80     cerr << \textcolor{stringliteral}{"Error: parameter d (delta) must be a positive integer. Instead, the value "} << delta << \textcolor{stringliteral}{" was
       given."} << endl;
81     \textcolor{keywordflow}{return} 1;
82   \}
83 
84   ifstream inp(infile.c\_str());
85   ofstream oup(outfile.c\_str());
86 
87   \textcolor{keywordflow}{if} (!inp.good())\{
88     cerr << \textcolor{stringliteral}{"Error: invalid input file <"} << infile << \textcolor{stringliteral}{"> given "} << endl;
89     \textcolor{keywordflow}{return} 1;
90   \}
91 
92   \textcolor{keywordflow}{if} (!oup.good())\{
93     cerr << \textcolor{stringliteral}{"Error: invalid output file <"} << outfile << \textcolor{stringliteral}{"> given "} << endl;
94     \textcolor{keywordflow}{return} 1;
95   \}
96 
97 
98   \textcolor{keywordflow}{if} (quiet == \textcolor{keyword}{true})\{
99     \textcolor{comment}{// do not log }
100     \hyperlink{classlogger_aab3c778c044ddf4b1b5fad8f4c230ff9}{logger::verbose} = \textcolor{keyword}{false}; \textcolor{comment}{// no run time log }
101     \hyperlink{classlogger_adbcc380b0ef53e23125f91e1c8f13f4e}{logger::report} = \textcolor{keyword}{false}; \textcolor{comment}{// no final report}
102   \}
103 
104   \textcolor{keywordflow}{if} (stat == \textcolor{keyword}{true})\{
105     \hyperlink{classlogger_a26812b5ba03f130e8dae3446d5fc032f}{logger::stat} = \textcolor{keyword}{true};
106   \} 
107 
108   \textcolor{comment}{//cout << " h = " << h << " delta = " << delta << " infile = " << infile << " outfile = " << outfile <<
       endl;}
109 
110   \hyperlink{classlogger_afba86118a3bb044060be8309b3fa755a}{logger::start}();
111   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false})\{
112     \textcolor{comment}{// goal is compression}
113     \hyperlink{classmarked__graph__encoder}{marked\_graph\_encoder} E(h, delta);
114     \hyperlink{classmarked__graph}{marked\_graph} G; \textcolor{comment}{// the input graph to be compressed}
115     inp >> G;
116     \hyperlink{classlogger_a9d29b49bd318a719a8e85b59eac54fe0}{logger::current\_depth}++;
117     \hyperlink{classlogger_a710163deb17bc81f70d53d285b8ac9ac}{logger::add\_entry}(\textcolor{stringliteral}{"Encode"}, \textcolor{stringliteral}{""});
118     \hyperlink{classmarked__graph__compressed}{marked\_graph\_compressed} C = E.encode(G);
119     \hyperlink{classlogger_a9d29b49bd318a719a8e85b59eac54fe0}{logger::current\_depth}--;
120     FILE* f;
121     f = fopen(outfile.c\_str(), \textcolor{stringliteral}{"wb+"});
122     \hyperlink{classlogger_a9d29b49bd318a719a8e85b59eac54fe0}{logger::current\_depth}++;
123     \hyperlink{classlogger_a710163deb17bc81f70d53d285b8ac9ac}{logger::add\_entry}(\textcolor{stringliteral}{"Write to binary"}, \textcolor{stringliteral}{""});
124     C.\hyperlink{classmarked__graph__compressed_ab9cdb7fc43badd58fb5202f74ffac723}{binary\_write}(f);
125     fclose(f);
126     logger::current\_depth--;
127   \}\textcolor{keywordflow}{else}\{
128     \textcolor{comment}{// goal is to decompess}
129     FILE* f;
130     f = fopen(infile.c\_str(), \textcolor{stringliteral}{"rb+"});
131     \hyperlink{classmarked__graph__compressed}{marked\_graph\_compressed} C;
132     logger::current\_depth++;
133     \hyperlink{classlogger_a710163deb17bc81f70d53d285b8ac9ac}{logger::add\_entry}(\textcolor{stringliteral}{"Read from binary"}, \textcolor{stringliteral}{""});
134     C.binary\_read(f);
135     fclose(f);
136     logger::current\_depth--;
137 
138     logger::current\_depth++;
139     \hyperlink{classlogger_a710163deb17bc81f70d53d285b8ac9ac}{logger::add\_entry}(\textcolor{stringliteral}{"Decode"}, \textcolor{stringliteral}{""});
140     \hyperlink{classmarked__graph__decoder}{marked\_graph\_decoder} D;
141     \hyperlink{classmarked__graph}{marked\_graph} G = D.\hyperlink{classmarked__graph__decoder_a31bbd76091acf5b058fd0a7b7948f74c}{decode}(C);
142     logger::current\_depth--;
143 
144     logger::current\_depth++;
145     \hyperlink{classlogger_a710163deb17bc81f70d53d285b8ac9ac}{logger::add\_entry}(\textcolor{stringliteral}{"Write decoded graph to output file"},\textcolor{stringliteral}{""});
146     oup << G;
147     logger::current\_depth--;
148   \}
149   \hyperlink{classlogger_abb856642f4e62c7a4a11cc4a2d963010}{logger::stop}();
150   \textcolor{keywordflow}{return} 0;
151 \}
\end{DoxyCode}
