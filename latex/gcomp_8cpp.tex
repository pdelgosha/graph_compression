\hypertarget{gcomp_8cpp}{}\section{gcomp.\+cpp File Reference}
\label{gcomp_8cpp}\index{gcomp.\+cpp@{gcomp.\+cpp}}


To compress / decompress simple marked graphs.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}marked\+\_\+graph\+\_\+compression.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
To compress / decompress simple marked graphs. 

This code has two functionalities\+: 1) gets a simple marked graph and compresses it, 2) gets a simple marked graph in its compressed form and decompresses it.

In order to compress a graph, the hyperparameters h and delta should be given using -\/h and -\/d, respectively. The input graph should be given using -\/i option, followed by the name of the file containing the graph. Also, the compressed graph will be stored in the file specified by -\/o option. A graph must be specified using its edge list in the following format\+: first, the number of vertices comes, then the mark of vertices in order, then each line contains the information on an edge, which is of the form i j x y, meaning there is an edge between vertices i and j, with mark x and y towards i and j, respectively.

In order to decompress, the compressed file should be given after -\/i, the file to store the decompressed graph should be given using -\/o, and an argument -\/u for uncompress should be given. 

\subsection{Function Documentation}
\mbox{\Hypertarget{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{gcomp_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{gcomp.\+cpp@{gcomp.\+cpp}!main@{main}}
\index{main@{main}!gcomp.\+cpp@{gcomp.\+cpp}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}


\begin{DoxyCode}
22                                 \{
23   \textcolor{keywordtype}{int} h, delta;
24   \textcolor{keywordtype}{string} infile, outfile;
25   \textcolor{keywordtype}{bool} uncompress = \textcolor{keyword}{false}; \textcolor{comment}{// becomes true if -u option is given (to decompress)}
26   \textcolor{keywordtype}{bool} quiet = \textcolor{keyword}{true}; \textcolor{comment}{// becomes false if -v option is given (verbose)}
27   \textcolor{keywordtype}{bool} stat = \textcolor{keyword}{false}; \textcolor{comment}{// if true, statistics on the properties of the compressed graph, e.g. number of star
       vertices / edges or the number of partition graphs will be given}
28   \textcolor{keywordtype}{char} opt;
29 
30   \textcolor{keywordflow}{while} ((opt = getopt(argc, argv, \textcolor{stringliteral}{"h:d:i:o:uvs"})) != EOF)\{
31     \textcolor{keywordflow}{switch}(opt)\{
32     \textcolor{keywordflow}{case} \textcolor{charliteral}{'h'}:
33       h = atoi(optarg);
34       \textcolor{keywordflow}{break};
35     \textcolor{keywordflow}{case} \textcolor{charliteral}{'d'}:
36       delta = atoi(optarg);
37       \textcolor{keywordflow}{break};
38     \textcolor{keywordflow}{case} \textcolor{charliteral}{'i'}:
39       infile = string(optarg);
40       \textcolor{keywordflow}{break};
41     \textcolor{keywordflow}{case} \textcolor{charliteral}{'o'}:
42       outfile = string(optarg);
43       \textcolor{keywordflow}{break};
44     \textcolor{keywordflow}{case} \textcolor{charliteral}{'u'}:
45       uncompress = \textcolor{keyword}{true}; \textcolor{comment}{// in the decompression phase }
46       \textcolor{keywordflow}{break};
47     \textcolor{keywordflow}{case} \textcolor{charliteral}{'v'}:
48       quiet = \textcolor{keyword}{false};
49       \textcolor{keywordflow}{break};
50     \textcolor{keywordflow}{case} \textcolor{charliteral}{'s'}:
51       stat = \textcolor{keyword}{true};
52       \textcolor{keywordflow}{break};
53     \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:
54       cerr << \textcolor{stringliteral}{"Error: option -"} << char(optopt) << \textcolor{stringliteral}{" requires an argument"} << endl;
55       \textcolor{keywordflow}{return} 1;
56     \}
57   \}
58   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false} and h <= 0)\{
59     cerr << \textcolor{stringliteral}{"Error: parameter h must be a positive integer. Instead, the value "} << h << \textcolor{stringliteral}{" was given."} << 
      endl;
60     \textcolor{keywordflow}{return} 1;
61   \}
62   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false} and delta <= 0)\{
63     cerr << \textcolor{stringliteral}{"Error: parameter d (delta) must be a positive integer. Instead, the value "} << delta << \textcolor{stringliteral}{" was
       given."} << endl;
64     \textcolor{keywordflow}{return} 1;
65   \}
66 
67   ifstream inp(infile.c\_str());
68   ofstream oup(outfile.c\_str());
69 
70   \textcolor{keywordflow}{if} (!inp.good())\{
71     cerr << \textcolor{stringliteral}{"Error: invalid input file <"} << infile << \textcolor{stringliteral}{"> given "} << endl;
72     \textcolor{keywordflow}{return} 1;
73   \}
74 
75   \textcolor{keywordflow}{if} (!oup.good())\{
76     cerr << \textcolor{stringliteral}{"Error: invalid output file <"} << outfile << \textcolor{stringliteral}{"> given "} << endl;
77     \textcolor{keywordflow}{return} 1;
78   \}
79 
80 
81   \textcolor{keywordflow}{if} (quiet == \textcolor{keyword}{true})\{
82     \textcolor{comment}{// do not log }
83     \hyperlink{classlogger_aab3c778c044ddf4b1b5fad8f4c230ff9}{logger::verbose} = \textcolor{keyword}{false}; \textcolor{comment}{// no run time log }
84     \hyperlink{classlogger_adbcc380b0ef53e23125f91e1c8f13f4e}{logger::report} = \textcolor{keyword}{false}; \textcolor{comment}{// no final report}
85   \}
86 
87   \textcolor{keywordflow}{if} (stat == \textcolor{keyword}{true})\{
88     \hyperlink{classlogger_a26812b5ba03f130e8dae3446d5fc032f}{logger::stat} = \textcolor{keyword}{true};
89   \} 
90 
91   \textcolor{comment}{//cout << " h = " << h << " delta = " << delta << " infile = " << infile << " outfile = " << outfile <<
       endl;}
92 
93   \hyperlink{classlogger_afba86118a3bb044060be8309b3fa755a}{logger::start}();
94   \textcolor{keywordflow}{if} (uncompress == \textcolor{keyword}{false})\{
95     \textcolor{comment}{// goal is compression}
96     \hyperlink{classmarked__graph__encoder}{marked\_graph\_encoder} E(h, delta);
97     \hyperlink{classmarked__graph}{marked\_graph} G; \textcolor{comment}{// the input graph to be compressed}
98     inp >> G;
99     \hyperlink{classmarked__graph__compressed}{marked\_graph\_compressed} C = E.encode(G);
100     FILE* f;
101     f = fopen(outfile.c\_str(), \textcolor{stringliteral}{"wb+"});
102     C.\hyperlink{classmarked__graph__compressed_ab9cdb7fc43badd58fb5202f74ffac723}{binary\_write}(f);
103     fclose(f);
104   \}\textcolor{keywordflow}{else}\{
105     \textcolor{comment}{// goal is to decompess}
106     FILE* f;
107     f = fopen(infile.c\_str(), \textcolor{stringliteral}{"rb+"});
108     \hyperlink{classmarked__graph__compressed}{marked\_graph\_compressed} C;
109     C.\hyperlink{classmarked__graph__compressed_a9db2d11bd63ad3d5a75e47b4023a89dd}{binary\_read}(f);
110     fclose(f);
111     \hyperlink{classmarked__graph__decoder}{marked\_graph\_decoder} D;
112     \hyperlink{classmarked__graph}{marked\_graph} G = D.\hyperlink{classmarked__graph__decoder_a31bbd76091acf5b058fd0a7b7948f74c}{decode}(C);
113     oup << G;
114   \}
115   \hyperlink{classlogger_abb856642f4e62c7a4a11cc4a2d963010}{logger::stop}();
116   \textcolor{keywordflow}{return} 0;
117 \}
\end{DoxyCode}
